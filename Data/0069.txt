예 안녕하세요 포포입니다
이제는 포프TV의 단골적으로
툭하면 이름이 올라오는
이름이 언급되는 종찬씨
종찬씨가 몇 달 전에
C++를 처음 하면서
이제 뭐 Hello world 이런걸 짜잖아요
그때
뭐 한글을 출력하려고 했었나봐요 그런데
한글을 출력하려고 할 때 유니코드가 아주 개판이 됬다고그런 이야기를 했었어요
근데 저는
C++를 짜면서 유니코드를 신경을 써본적이 없거든요
참 어찌보면
되게 재미있는 이야기이기도 한데
북미 쪽에서 게임을 만들때는
유니코드를 신경을 안써요
그냥 유니코드 그런거 있어? 신경쓸 필요있어? 그런거 안해
유니코드를 쓸 일이 있으면 그냥 외주를 주더라고요
그러니까 예를 들어서
게임을 그 뭐 영문... 영어권 그리고 왠만한 유럽권에서 쓸때는
그냥 뭐
8bit character 있잖아요
ASCII char 그거를 그냥 써요
그리고
그걸로 해결을 못하는게 뭐 중국이라던가 그런 언어권이 있으면
그냥 저희 자체개발팀에선 안하고
외주를 줘요
걔네보고 알아서 포팅하라고
그래서 저희는 한번도 ASCII 외의 이상을 써 볼일이 없었어요
굉장히 편했죠
캐릭터 하나 8bit 이런 식으로
과연 유니코드에 대한 문제가 뭔가를 제가 몰라서
한번 뒤져를 봤어요
이게 도대체 왜 문젠가 그렇게
뭐 다른 언어에선 이미 잘 지원하고 C#이라던가 이런거에서는
저는 그때 단순히 생각으로는 유니코드가 그냥 캐릭터 하나당 8bit가 아니라
뭐 한... 뭐  16bit나 32bit면 되는거 아니야라고? 생각을 했는데
뭐 유니코드 규약을 뒤져보니까
재미있더라고요
일단 C++ 자체에서 유니코드를 지원하지는 않아요
표준으로 나와있지는 않아요
그래서 이제 뭐...
한동안 뭐 멀티바이트 코드라고 해서 마이크로소프트 쪽에서 이제
뭐... 두 바이트(byte)로
아 두 바이트 맞죠
2바이트로 하는 그런게 있었고
이제 그거는 더이상 쓰지 말라고그러더라고요
그래서 이제는 마이크로소프트 쪽에서는 이제
W_char라고 있잖아요 그걸로 해가지고
지원을 좀 하는 것 같은데
요니코드가 규격이 여러개가 있더라고요
UTF-8도 있고
UTF-16
그러니까 8은 팔이고 16은 십육이죠
아...
그리고 UTF-32도 있었던 것 같아요
그래서 저는 처음 그 숫자만 보고
UTF-8은 전부다 1바이트고 UTF-16은 무조건 2바이트고
UTF-40... 아니 UTF-32는 무조건 4바이트인가보다라고 생각을 했는데
아니데요?
그게 UTF-8은
제가 지금 정확히 맞는진 모르겠어요 틀리면 뭐 댓글 달아주시고
아... 그...
한 유니코드 캐릭터가
1바이트가 될 수 도 있고
2바이트가 될 수도 있고 4바이트가 될 수도 있고
뭐 그런 어떤 유니코드 캐릭터를 쓰느냐에 따라 다르데요
그러니까 뭐 어느 나라 언어는 요 캐릭터는 2바이트고
저 캐릭터는 4바이트고 그렇게 된다더라고요
UTF-16은 2바이트 아니면 4바이트인 것 같아요
그래서
이게 상당히 저희는 여태까지 캐릭터를 이제 String이 아니라 그냥 character array로 쓸때는 배열로 쓸때는
상당히 저희는 그냥 간편했거든요
한 글자 1바이트 무조건 고칠 수 있고 얼마나 편해요
스트링 기반은
그 뭐야...
면접 질문들도 그걸로 많이 나오잖아요
편하니까
유니코드로 하게되니까
와! 정말 복잡하더라고요
그래서 현재 지금 이제 보통 하는 이야기는 뭐냐면
아까 말했듯이 멀티바이트는 쓰지 말라고그랬고
wchar를 쓰는게 일반적인 것 같아요 wide char라고도 하죠
근데 이게 규격이 없기 때문에
wide char가
아... 윈도우즈에선 2바이트에요
wide char array가 타입 데이터 타입이
그리고
아... 리눅스에선 이게 4바이트일꺼에요 그래서 플랫폼 간 호환 안되는 것도 좀 있고
그래서 이제
어쨋든간에
이리저리보다가
결과적으로는
정말 이걸 쓸려면 말 그대로 wchar를 써서
하는게 맞는 것 같고 가장 편하게 하는 거는
물론 윈도우즈하고 리눅스 간의 메모리 사용량 차이는 있지만
그리고 wchar를 쓸때는
곧바로 메모리를 이제 array로 만들어서 엑세스하기보다는
wchar가 유니코드를 처리할 수 있는 온갖 function들이 있어요
제가 생각하기에는
어... C++ 표준 뼝션... 표준 function은 아닌 것 같고
그 윈도우즈에서 지원하는 그런 wchar를 유니코드로 해석을 해서 해줄 수 있는 그런 여러가지 함수들이 있어요
뭐 예를들어서
유니코드에서 ASCII 바꾸는 함수들도 있고
그런거를 반드시 써야되는 것 같고요
아...
뭐 리눅스에도 그에 똑같은 그런 함수들이 있겠죠
아니면 정말 플랫폼에 상관없이 크로스 플랫폼으로 쓸려면
공짜로 나와있는 라이브러리가 있더라고요 IBM 쪽에서 개발을 한 것 같은데
ICU라고 있어요 그냥 구글 가셔가지고 "ICU" 한칸 띄고 "유니코드" 검색하면 나오겠죠
이거를 사용하면 재미있는게 뭐냐면
이 라이브러리 크기 자체가 코어만 때와도
그러니까 여러가지 잡다한게 있어요 근데 코어 정말 유니코드 쓰는데 필요한 코어만 때도 12메가 거든요
모르겠어요 제가 이제 XBOX360이나 PS3용으로 게임을 만들어서 그런지 몰라도 라이브러리에 12메가는 너무 싫더라고요 뭔가
이게 뭐 안쓰는건 당연히 짤려 나가나? 그러면 좋겠지만
메모리가 512메가였고
PS3같은 경우에는 이제 CPU 메모리가 256메가였거든요
그리고 거기다 보통 저희가 쓰는 이제... 실행파일 크기가 있잖아요
그게 그 정도 되요 한 12메가 뭐 크면 20메가
그것도 크다고 바락바락 거리는데 그거에다가 유니코드 지원한다고 12메가를 더 붙인다는게
어 쫌... 그렇다라고요
근데 뭐 이제 PC게임이나 그런건 상관이 없을 수도 있는데
어 그래서 정말 괴롭구나 C++에 유니코드를 쓰는건
그 생각을 했어요 특히 게임 쪽에선
근데 뭐 어쨋든간에 뭐 메모리
그러니까 실행파일에 크기가 크게 문제가 안되고
그러신 분들은
ICU써보는 것도 나쁘지 않을 것 같아요
음... 속도가 어떤진 모르겠지만
아니면 그냥 뭐 대충 만들고 그렇게 중요한거 아니면
아까 말씀드린듯이 wchar쓰는 것도 나쁘지 않은 것 같고
그래서 야...
C++에서 유니코드를 지원하는
좀 더 light weight
그러니까 이제 좀 가벼운 용량 덜 차지하고 속도 빠른 라이브러리가 좀더 제대로 있지않아야될까라는 생각을 잠깐 했고요
아... 그... MSDN에서
이야기한건 그거였나
MSDN이 아니라 스택 오버플로우에서 이야기한 거일 수도 있어요
거기서 했던 이야기는
그 어떤 캐릭터가 그냥 게임에서만 사용되는 캐릭터
문자로 출력하는 거 아니고 게임 내부에서 캐릭터 쓰는 일이 있잖아요
그런경우는 그냥 wchar말고 ASCII 써가지고
8비트 캐릭터있잖아요
그거 써가지고 하면 되고
그외의 말그대로 화면에 출력하는데 나중에 로컬라이제이션이라고 있죠
번역되가지고 각 나라마다 언어로
아... 그렇게 출력되야되는 것들?
그런 것들은 wchar를 쓰는 것만으로도 충분하다고 이야기를 하더라고요
아 그리고 아까 이제
이것도 말씀드려야겠구나
제가 말씀드렸잖아요 그 유니코드가
어느나라에 어느 문자를 쓰는 거에 따라 1바이트가 될 수있고 2바이트가 될 수 있고 4바이트가 될 수도있다고 말씀을 드렸는데
아... 그... 허린 님이 말씀하신걸 보면
그... 제가 트위터 친구고 마이크로소프트 MVP이기시도 하시고
실제 유니코드에서 4바이트를 쓰는 캐릭터는 굉장히 드물데요
뭐 중국어도 대부분 2바이트 안에 들어간다고 그러더라고요
그래서 굉장히 드문 케이스라고는 해요 보통 왠만한 게임 만드시는 분들은 2바이트 정도로
하가지고 UTF-16 정도로 가신다고 이야기를 하셨고
그것도 잠깐 말씀드려야될 것같아서 했고요
제가 그냥 유니코드에대해 봤던거?
뭐 제 생각? 을 담았는데
뭐 해법은 만만치 보이지 않더라고요
ICU를 쓰거나 그냥 wchar쓰면서 대충 쓰거나
그래서 예...
유니코드를 처리하는 코드를 직접 짜는 것도 굉장히 복잡하더라고요 생각보다
이게
그냥 그 ASCII 처럼 그냥 1대 1로 대응되는게 아니라 뭐 코드 페이지 있고 뭐 있고 너무 복잡해가지고
아 나도못하겠네?
하기 싫다 이 생각이 들어서 그냥 C#쓰지 이 생각이 들더라고요
그래서 예...
그 정도로 이제
오랜만에 씨프프... C++을
좀 많이... 어찌보면 디스를 한거죠
이게 지원이 안된다...
지원이 되야되는 것 같아요 이제는 C++ 쪽에서
뭐 요즘 다양하게 많은 짓을 하잖아요
C++에서 이제 계속 새로운 표준나오고 막
별별 도움 안되는 것도 많이 추가하고
그것도 좋은데 유니코드가 추가되야될 것 같아요
옛날에 들은 이야기로는 이게 추가가되려다 빠졌다는 이야기도 한번 들은 것 같고
부스트 쪽에 있나요 혹시? 이거 처리하는게?
제가 그건 또 모르겠네?
어... 있기가 힘들것 같은데?
예 뭐... 어쨋든 그정도로 할게요
C++에 대한 적당한 불만은
예 포프였습니다
